(function(n,t){t(["./kendo.core"],n)})(function(){return function(n,t){function o(r,u){for(var v=[],k=r.logic||"and",s,y,e,a,c,w,b=r.filters,l=0,p=b.length;l<p;l++)r=b[l],s=r.field,c=r.value,a=r.operator,expression=r.expression,r.filters?r=o(r,u):(w=r.ignoreCase,s=s.replace(/\./g,"/"),r=f[a],u&&(r=h[a]),r&&c!==t&&(r==="any"?r=expression:(y=n.type(c),y==="string"?(e="'{1}'",c=c.replace(/'/g,"''"),w===!0&&(s="tolower("+s+")")):e=y==="date"?u?"{1:yyyy-MM-ddTHH:mm:ss+00:00}":"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",r.length>3?r!=="substringof"?e="{0}({2},"+e+")":(e="{0}("+e+",{2})",a==="doesnotcontain"&&(u?(e="{0}({2},'{1}') eq -1",r="indexof"):e+=" eq false")):e="{2} {0} "+e,r=i.format(e,r,c,s)))),v.push(r);return r=v.join(" "+k+" "),v.length>1&&(r="("+r+")"),r}var i=window.kendo,u=i.data.DataSource,r=n.extend,s=u.extend({init:function(n){var s=this,t=n.url,h=n.expand,f=!(n.autoId==!1),e=n.transportData,i=n.schema&&n.schema.model&&n.schema.model.id||"Id",o={};o[i]={editable:!f,validation:{required:!f}};n=r(!0,{transport:{read:t+(h||""),create:{url:t,data:e},update:{url:function(n){return t+"('"+n[i]+"')"},data:e},destroy:{url:function(n){return t+"('"+n[i]+"')"}}},schema:{model:{id:i,fields:o}}},n);u.fn.init.call(s,n)},options:{type:"odata-v4",pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0,requestStart:function(){var n=this._getWidget(this.options.toolbar,"ToolBar");n&&n.enable(".k-add-button",!1)},requestEnd:function(){var n=this._getWidget(this.options.toolbar,"ToolBar");n&&n.enable(".k-add-button")},error:function(t){var i=t.xhr.responseJSON,u,f,r;i&&(u=this,i.odata&&i.odata.error?(r=i.odata.error.value,u._showError(f,r)):i.error&&(r=i.error.message,i.error.innererror&&n(i.error.innererror.message.split("\n")).each(function(){if(this.length>0){var n=this.split(" : ");n.length>1?(f=n[0],r=n[1]):r+=n[0];u._showError(f,r)}})))}},_getWidget:function(t,i){if(t){if(t.options&&t.options.name&&t.options.name==i)return t;if(t.selector)return t.data("kendo"+i);if(typeof t=="string")return n(t).data("kendo"+i)}else return null},_showError:function(t,i){function l(n){return n.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function a(t){return n.parseHTML?n(n.parseHTML(t)):n(t)}var f=this._getWidget(this.options.grid,"Grid"),s=!1,u,h,o;if(f&&f.editable){var e=f.editable.validatable,c=e._errorTemplate,r=f.editable.element.find(t?"input[name='"+t+"']":"input").first();r.length>0&&(r.removeAttr("aria-invalid"),e._errors[t]=i,u=a(c({message:l(i)})),e._decorateMessageContainer(u,t),h=e._findMessageContainer(t).add(r.next(".k-invalid-msg")).hide(),h.replaceWith(u).length||u.insertAfter(r),u.show(),r.attr("aria-invalid",!0),r.toggleClass("k-invalid",!0),s=!0)}s||(o=this._getWidget(this.options.notification,"Notification"),o&&o.show(i,"error"))}}),f={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",any:"any"},h=r({},f,{contains:"contains"}),e={pageSize:n.noop,page:n.noop,filter:function(n,t,i){t&&t.filters&&t.filters.length&&(n.$filter=o(t,i))},sort:function(t,i){var r=n.map(i,function(n){var t=n.field.replace(/\./g,"/");return n.dir==="desc"&&(t+=" desc"),t}).join(",");r&&(t.$orderby=r)},skip:function(n,t){t&&(n.$skip=t)},take:function(n,t){t&&(n.$top=t)}},c={read:{dataType:"jsonp"}};r(!0,i.data,{EditableDataSource:s,schemas:{"odata-v4":{data:function(n){return n.value?n.value:(delete n["odata.metadata"],n["@odata.context"]&&delete n["@odata.context"],[n])}}},transports:{odata:{parameterMap:function(n,t,r){var f,s,u,o;if(n=n||{},t=t||"read",o=(this.options||c)[t],o=o?o.dataType:"json",t==="read"){f={$inlinecount:"allpages"};o!="json"&&(f.$format="json");for(u in n)e[u]?e[u](f,n[u],r):f[u]=n[u]}else{if(o!=="json")throw new Error("Only json dataType can be used for "+t+" operation.");if(t!=="destroy"){for(u in n)s=n[u],typeof s=="number"&&(n[u]=s+"");f=i.stringify(n)}}return f}}}})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});